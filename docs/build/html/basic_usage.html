
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Basic Usage &#8212; LR-Splines 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LRSplines API Reference" href="api_reference.html" />
    <link rel="prev" title="LR Splines" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-usage">
<h1>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h1>
<p>The central object in the LRSplines-package is the LRSpline object. We
initialize an LRSpline at the tensor-product level by specifying two
knot vectors, and corresponding polynomial degrees. The following code
initializes a biquadratic LR-spline.</p>
<div class="section" id="initialization-and-mesh-visualization">
<h2>Initialization and mesh visualization<a class="headerlink" href="#initialization-and-mesh-visualization" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">LRSplines</span>

<span class="n">du</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">dv</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">knots_u</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">knots_v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">LR</span> <span class="o">=</span> <span class="n">LRSplines</span><span class="o">.</span><span class="n">init_tensor_product_LR_spline</span><span class="p">(</span><span class="n">du</span><span class="p">,</span> <span class="n">dv</span><span class="p">,</span> <span class="n">knots_u</span><span class="p">,</span> <span class="n">knots_v</span><span class="p">)</span>
</pre></div>
</div>
<p>We can at any stage visualize the LR-mesh which underlies a given
LR-spline, as seen:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LR</span><span class="o">.</span><span class="n">visualize_mesh</span><span class="p">()</span>
</pre></div>
</div>
<p>yielding the image</p>
<p align="center"></p><p>Here, each <strong>element</strong> of the mesh displays the number of supported
B-splines. In this case there are nine supported B-splines on each
element. The green color indicates that the element is not
<strong>overloaded</strong>. Each meshline displays its <strong>multiplicity</strong> indicated by
a number in a white box. As we can see, the boundary mesh-lines have
multiplicity 3, which reflects the knot vectors we chose. The dimension
of the spline space is displayed at the top. In this case, we have five
basis splines in each direction, totaling 25 tensor product B-splines.</p>
</div>
<div class="section" id="meshline-insertion">
<h2>Meshline insertion<a class="headerlink" href="#meshline-insertion" title="Permalink to this headline">¶</a></h2>
<p>We can insert mesh-lines into the mesh by creating a new Meshline
object. In this example, we insert a meshline between the points (1.5,
0) and (1.5, 2) and between the points(1, 1.5) and (3, 1.5). This is
represented in Python as:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span> <span class="o">=</span> <span class="n">LRSplines</span><span class="o">.</span><span class="n">Meshline</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">constant_value</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">LRSplines</span><span class="o">.</span><span class="n">Meshline</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">constant_value</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter determines the direction of the meshline, i.e., 0
for vertical and 1 for horizontal. We insert this meshline into the
LR-spline, and visualize the result.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LR</span><span class="o">.</span><span class="n">insert_line</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
<span class="n">LR</span><span class="o">.</span><span class="n">insert_line</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
<span class="n">LR</span><span class="o">.</span><span class="n">visualize_mesh</span><span class="p">()</span>
</pre></div>
</div>
<p>This yields the following image:</p>
<p align="center"></p><p>As we can see, some of the elements have turned red, indicating that
they are now overloaded, which may result in loss of linear
independence.</p>
</div>
<div class="section" id="evaluation">
<h2>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h2>
<p>We can at any stage evaluate the LR-spline. At the moment there is no
clever functionality for setting the coefficients of the underlying
B-splines, but we can do so explicitly by looping over the set of basis
functions <code class="docutils literal notranslate"><span class="pre">LR.S</span></code>.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="k">import</span> <span class="n">Axes3D</span>

<span class="c1"># set the coefficients explicitly</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">LR</span><span class="o">.</span><span class="n">B</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">coefficient</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">knots_u</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">knots_u</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">N</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">knots_v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">knots_v</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">N</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">LR</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">axs</span> <span class="o">=</span> <span class="n">Axes3D</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">axs</span><span class="o">.</span><span class="n">plot_wireframe</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="c1"># or plot_surface</span>
</pre></div>
</div>
<p>This gives the resulting surface:</p>
<p align="center"></p></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">LR-Splines</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">LR Splines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#initialization-and-mesh-visualization">Initialization and mesh visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meshline-insertion">Meshline insertion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evaluation">Evaluation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">LRSplines API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">LR Splines</a></li>
      <li>Next: <a href="api_reference.html" title="next chapter">LRSplines API Reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Ivar Stangeby.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/basic_usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>